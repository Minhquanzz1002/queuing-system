"use strict";(self.webpackChunkmy_webpack_project=self.webpackChunkmy_webpack_project||[]).push([[907],{24185:(e,t,r)=>{r.d(t,{Jv:()=>v,h9:()=>b,sc:()=>y});var n=r(91055),a=r(21851),i=r(7059),c=r.n(i);const s=["issueTime","expiryDate"],l=["issueTime","expiryDate"];function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}const p=(0,n.rJ)(a.db,"queues"),f=(0,n.rJ)(a.db,"services"),b=async({status:e,issueSource:t,serviceId:r,startDate:a,endDate:i})=>{const c=[...e?[(0,n._M)("status","==",e)]:[],...t?[(0,n._M)("issueSource","==",t)]:[],...r?[(0,n._M)("service","==",(0,n.H9)(f,r))]:[],...a?[(0,n._M)("issueTime",">=",a)]:[],...i?[(0,n._M)("issueTime","<=",i)]:[]],l=(0,n.P)(p,...c),o=await(0,n.GG)(l);return await Promise.all(o.docs.map((async e=>{const t=e.data(),{issueTime:r,expiryDate:a}=t,i=d(t,s),c=await(0,n.x7)(i.service),l=c.data(),o=u({id:c.id},l);return u(u({id:e.id},i),{},{issueTime:r.toDate(),expiryDate:a.toDate(),service:o})})))},y=async e=>{const t=await(0,n.x7)((0,n.H9)(p,e));if(!t.exists())return null;const r=t.data(),{issueTime:a,expiryDate:i}=r,c=d(r,l),s=await(0,n.x7)(c.service),o=s.data(),m=u({id:s.id},o);return u(u({id:t.id},c),{},{issueTime:a.toDate(),expiryDate:i.toDate(),service:m})},v=async e=>{try{const t=c()(),r=t.endOf("day"),i={serialNumber:await(async e=>{let t="";return e.usePrefix&&e.prefix&&(t+=e.prefix),t+="0001",e.useSuffix&&e.suffix&&(t+=e.suffix),t})(e.service),customer:e.customer,status:"WAITING",issueTime:t.toDate(),issueSource:e.issueSource,expiryDate:r.toDate(),service:(0,n.H9)(a.db,"services",e.service.id)},s=await(0,n.gS)(p,i),l=(await(0,n.x7)(s)).data();if(!l)throw new Error("Unable to add a queue");return{id:s.id,serialNumber:l.serialNumber,customer:l.customer,status:l.status,issueTime:l.issueTime.toDate(),expiryDate:l.expiryDate.toDate(),service:e.service,issueSource:l.issueSource}}catch(e){throw console.error("Error adding device: ",e),new Error("Unable to add a device")}}},57975:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(77810),a=r(68190),i=r(81342);const c=({children:e,href:t,onClick:r,icon:c})=>{const s=n.createElement(a.A,{vertical:!0,align:"center",className:"action-button__item"},n.createElement("div",{className:"action-button__item--icon"},c),n.createElement("div",{className:"action-button__item--text"},e));return t?n.createElement(i.N_,{to:t},s):n.createElement("button",{onClick:r},s)},s=({children:e,style:t})=>{const r=n.Children.toArray(e).filter((e=>(0,n.isValidElement)(e)&&e.type===c));return n.createElement("div",{className:"action-button",style:t},r.map(((e,t)=>n.createElement(n.Fragment,{key:`action-${t}`},t>0&&n.createElement("div",{className:"action-button__separator"}),e))))};s.Item=c;const l=s},90194:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(77810),a=r(6620),i=r(26038),c=r(81342);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(null,arguments)}const l=e=>n.createElement(a.A,s({className:"breadcrumb",separator:n.createElement(i.Vj,{style:{color:"rgba(126, 125, 136, 1)"}}),itemRender:(e,t,r)=>r.indexOf(e)!==r.length-1&&e.href?n.createElement(c.N_,{className:"breadcrumb-link",to:e.href},e.title):n.createElement("span",{className:"breadcrumb-link"},e.title)},e))},8590:(e,t,r)=>{r.d(t,{A:()=>f});var n=r(77810),a=r(68190),i=r(14856),c=r(26038),s=r(8955),l=r(7059),o=r.n(l);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const p=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"6",height:"8",viewBox:"0 0 6 8",fill:"none"},n.createElement("path",{d:"M5.51129 3.13807L3.96467 2.01241L1.44455 0.178209C0.910697 -0.20463 0 0.0696425 0 0.618188V4.17802V7.38359C0 7.93213 0.910697 8.20641 1.44455 7.81785L5.51129 4.85799C6.1629 4.38944 6.1629 3.61233 5.51129 3.13807Z",fill:"#535261"})),f=({start:e,end:t,onChange:r})=>{const[l,u]=(0,n.useState)(!1),[d,f]=(0,n.useState)(o()()),b=(0,n.useRef)(null);(0,s.A)(b,(()=>u(!1)));const y=()=>{u(!l)};return n.createElement(a.A,{gap:"small",align:"center",className:"range-picker"},n.createElement(i.A,{size:"large",prefix:n.createElement(c.Vq,{style:{color:"#FF7506"}}),placeholder:"DD/MM/YYYY",value:e?e.format("DD/MM/YYYY"):"",readOnly:!0,onClick:y}),n.createElement(p,null),n.createElement(i.A,{size:"large",prefix:n.createElement(c.Vq,{style:{color:"#FF7506"}}),placeholder:"DD/MM/YYYY",value:t?t.format("DD/MM/YYYY"):"",readOnly:!0,onClick:y}),l&&n.createElement("div",{className:"range-picker__calendar",ref:b},n.createElement(a.A,{justify:"space-between",align:"center",className:"range-picker__calendar-header"},n.createElement("button",{onClick:()=>{f(d.subtract(1,"month"))}},n.createElement(c.Vj,null)),n.createElement("div",null,d.format("MMMM YYYY")),n.createElement("button",{onClick:()=>{f(d.add(1,"month"))}},n.createElement(c.Vj,null))),n.createElement("div",{className:"range-picker__calendar-divider"}),n.createElement("div",{className:"range-picker__calendar-weekdays"},["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((e=>n.createElement(a.A,{justify:"center",align:"center",key:e,className:"calendar__day-name"},e)))),n.createElement("div",{className:"range-picker__calendar-body"},(()=>{const r=d.startOf("month"),n=d.endOf("month"),a=[],i=r.day(),c=0===i?6:i-1,s=r.subtract(1,"month");for(let e=c-1;e>=0;e--)a.push({date:s.endOf("month").subtract(e,"day"),currentMonth:!1});for(let e=1;e<=n.date();e++){const t=r.date(e);a.push({date:t,currentMonth:!0})}const l=42-a.length,o=n.add(1,"day");for(let e=1;e<=l;e++)a.push({date:o.date(e),currentMonth:!1});return a.map((r=>m(m({},r),{},{isStart:e&&r.date.isSame(e,"day"),isEnd:t&&r.date.isSame(t,"day"),isInRange:e&&t&&r.date.isBetween(e,t,"day","[]")})))})().map((({date:i,currentMonth:c,isStart:s,isEnd:l,isInRange:o},u)=>n.createElement(a.A,{align:"center",justify:"center",key:u,onClick:()=>(n=>{!e||e&&t?r(n,null):n.isBefore(e)?r(n,e):r(e,n)})(i),className:`range-picker__calendar-day ${c?"range-picker__calendar-day--current":"range-picker__calendar-day--other-month"} ${s?"range-picker__calendar-day--start":""} ${l?"range-picker__calendar-day--end":""} ${o?"range-picker__calendar-day--in-range":""}`},i.format("DD")))))))}},22295:(e,t,r)=>{r.d(t,{A:()=>u});var n=r(77810),a=r(46983),i=r(8931),c=r(25084),s=r(1217),l=r(12959);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(null,arguments)}const u=e=>n.createElement(a.Ay,{theme:{components:{Table:{headerBg:"#FF9138",headerColor:"white",borderColor:"#FFE3CD",cellFontSize:14},Pagination:{itemActiveBg:"#FF7506",itemActiveColorDisabled:"white",itemBg:"none"}},token:{fontSize:16,fontWeightStrong:700}},renderEmpty:()=>n.createElement(i.A,{image:i.A.PRESENTED_IMAGE_SIMPLE,description:"Không có dữ liệu"})},n.createElement(c.A,o({},e,{rowHoverable:!1,pagination:{itemRender:(e,t,r)=>"prev"===t?n.createElement(s.A,{style:{color:"#A9A9B0"}}):"next"===t?n.createElement(l.A,{style:{color:"#A9A9B0"}}):r},rowClassName:(e,t)=>t%2==0?"":"bg-orange-50"})))},17192:(e,t,r)=>{r.d(t,{A:()=>v});var n=r(77810),a=r(68190),i=r(77076),c=r(75832),s=r(26038),l=r(81342),o=r(71468),u=r(8955),m=r(7059),d=r.n(m),p=r(29200),f=r(24185);const b=({name:e,date:t})=>n.createElement("div",{className:"notification-card"},n.createElement("div",{className:"notification-card__user"},"Người dùng: ",e),n.createElement("div",{className:"notification-card__time",title:`Thời gian nhận số: ${d()(t).format("HH[h]mm [ngày] DD/MM/YYYY")}`},"Thời gian nhận số: ",d()(t).format("HH[h]mm [ngày] DD/MM/YYYY"))),y=({open:e,setOpen:t})=>{const r=(0,n.useRef)(null);(0,u.A)(r,(()=>t(!1)));const[a,i]=(0,n.useState)([]),c=(0,p.G)(f.h9);return(0,n.useEffect)((()=>{c.execute({}).then(i).catch((()=>i([])))}),[]),e?n.createElement("div",{className:"topbar__notification-popup",ref:r},n.createElement("div",{className:"topbar__notification-popup__title"},"Thông báo"),n.createElement("div",{className:"topbar__notification-popup__content"},a.map(((e,t)=>n.createElement(n.Fragment,{key:t},t>0&&n.createElement("div",{className:"notification-card__divider"}),n.createElement(l.N_,{to:`/admin/cap-so/${e.id}`},n.createElement(b,{name:e.customer.name,date:e.expiryDate}))))))):null},v=()=>{const{user:e}=(0,o.d4)((e=>e.profile)),[t,r]=(0,n.useState)(!1);return n.createElement(a.A,{className:"topbar",align:"center",gap:"large"},n.createElement("div",{style:{position:"relative"}},n.createElement(i.Ay,{shape:"circle",className:"topbar__notification",onClick:e=>{e.stopPropagation(),r(!0)}},n.createElement(s.pY,null)),n.createElement(y,{open:t,setOpen:r})),n.createElement(a.A,{gap:"small",className:"topbar__user"},n.createElement(l.N_,{to:"/admin/ho-so"},n.createElement(c.A,{size:40,className:"topbar__avatar"},"A")),n.createElement(a.A,{vertical:!0,className:"topbar__info"},n.createElement("div",{className:"topbar__greeting"},"Xin chào"),n.createElement(l.N_,{to:"/admin/ho-so"},n.createElement("div",{className:"topbar__username"},e?.name||"Chưa rõ")))))}},29200:(e,t,r)=>{r.d(t,{G:()=>s});var n=r(77810);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const s=e=>{const[t,r]=(0,n.useState)({value:void 0,status:"ready",error:null}),a=(0,n.useCallback)((e=>(r((t=>i(i({},t),{},{status:"ready",value:e}))),Promise.resolve(e))),[]),c=(0,n.useCallback)((e=>(r((t=>i(i({},t),{},{status:"error",error:e}))),console.log(e),Promise.reject(e))),[]),s=(0,n.useCallback)(((...t)=>(r((e=>i(i({},e),{},{status:"loading",value:void 0,error:null}))),e(...t).then(a).catch(c))),[e,c,a]);return i({execute:s},t)}},8955:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(77810);const a=(e,t)=>{const r=(0,n.useCallback)((r=>{r&&e.current&&!e.current.contains(r.target)&&t(r)}),[e,t]);(0,n.useEffect)((()=>(document.addEventListener("mousedown",(e=>r(e)),!0),document.addEventListener("touchstart",(e=>r(e)),!0),()=>{document.removeEventListener("mousedown",r,!0),document.removeEventListener("touchstart",r,!0)})),[r])}},44288:(e,t,r)=>{r.r(t),r.d(t,{default:()=>j});var n=r(77810),a=r(26038),i=r(17192),c=r(68190),s=r(87026),l=r(57975),o=r(90194),u=r(7059),m=r.n(u),d=r(29200),p=r(24185),f=r(8590),b=r(97097),y=r(22295);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=r(8955);const _=({title:e,dropdownRender:t})=>{const[r,i]=(0,n.useState)(!1),s=(0,n.useRef)(null);return(0,g.A)(s,(()=>i(!1))),n.createElement(c.A,{justify:"space-between",align:"center",className:"report-table__header"},n.createElement("div",null,e),n.createElement("button",{className:"report-table__header-filter-button",onClick:()=>i(!r)},n.createElement(a.CK,null)),r&&n.createElement("div",{className:"report-table__header-filter",ref:s},t()))},O=({checked:e,onChange:t,children:r})=>n.createElement("label",null,r,n.createElement("input",{type:"checkbox",checked:e,onChange:t,style:{display:"none"}}),n.createElement("div",{className:"checkbox "+(e?"checkbox-checked":"")},e?n.createElement(a.Tf,null):null)),w=({queues:e,setFilteredQueues:t})=>{const{filters:r,filteredQueues:a,uniqueServices:i,uniqueSerialNumbers:c,uniqueIssueTimes:s,setServiceFilters:l,setStatusFilter:o,setSourceFilter:u,setSerialNumberFilter:d,setIssueTimeFilter:p}=(e=>{const[t,r]=(0,n.useState)({serviceFilters:[],statusFilter:"ALL",sourceFilter:"ALL",serialNumberFilter:"ALL",issueTimeFilter:"ALL"}),a=(0,n.useMemo)((()=>e.filter((e=>{const r=0===t.serviceFilters.length||t.serviceFilters.includes(e.service.name),n="ALL"===t.statusFilter||t.statusFilter===e.status,a="ALL"===t.sourceFilter||t.sourceFilter===e.issueSource,i="ALL"===t.serialNumberFilter||t.serialNumberFilter===e.serialNumber,c="ALL"===t.issueTimeFilter||t.issueTimeFilter instanceof Date&&e.issueTime.getTime()===t.issueTimeFilter.getTime();return i&&r&&n&&a&&c}))),[e,t]),i=(0,n.useMemo)((()=>{const t=e.map((e=>e.service.name));return Array.from(new Set(t))}),[e]),c=(0,n.useMemo)((()=>{const t=e.map((e=>e.serialNumber));return Array.from(new Set(t))}),[e]),s=(0,n.useMemo)((()=>{const t=e.map((e=>e.issueTime));return Array.from(new Set(t)).sort(((e,t)=>m()(t).diff(m()(e))))}),[e]);return{filters:t,filteredQueues:a,uniqueServices:i,uniqueSerialNumbers:c,uniqueIssueTimes:s,setServiceFilters:e=>{r((t=>h(h({},t),{},{serviceFilters:e.includes("ALL")?[]:e})))},setStatusFilter:e=>{r((t=>h(h({},t),{},{statusFilter:e})))},setSourceFilter:e=>{r((t=>h(h({},t),{},{sourceFilter:e})))},setSerialNumberFilter:e=>{r((t=>h(h({},t),{},{serialNumberFilter:e})))},setIssueTimeFilter:e=>{r((t=>h(h({},t),{},{issueTimeFilter:e})))}}})(e);(0,n.useEffect)((()=>{t(a)}),[a]);const f=[{title:()=>{const e=[{key:"ALL",onClick:()=>d("ALL"),label:"Tất cả"},...c.map((e=>({key:e,onClick:()=>d(e),label:e})))];return n.createElement(_,{title:"Số thứ tự",dropdownRender:()=>n.createElement(b.A,{className:"report-table__header-filter-content",defaultSelectedKeys:["ALL"],items:e})})},dataIndex:"serialNumber",key:"report_serialNumber"},{title:()=>n.createElement(_,{title:"Tên dịch vụ",dropdownRender:()=>n.createElement("div",{className:"report-table__header-filter-checkbox"},n.createElement("div",{className:"report-table__header-filter-checkbox-item"},n.createElement(O,{checked:0===r.serviceFilters.length,onChange:e=>{var t;(t=e.target.checked?["ALL"]:[]).includes("ALL")?l([]):l(t)}},"Tất cả")),i.map((e=>n.createElement("div",{key:e,className:"report-table__header-filter-checkbox-item"},n.createElement(O,{checked:r.serviceFilters.includes(e),onChange:t=>{const n=t.target.checked?[...r.serviceFilters,e]:r.serviceFilters.filter((t=>t!==e));l(n)}},e)))))}),dataIndex:"service",key:"report_service",render:e=>e.name},{title:()=>{const e=[{key:"ALL",onClick:()=>p("ALL"),label:"Tất cả"},...s.map(((e,t)=>({key:t,onClick:()=>p(e),label:m()(e).format("HH:mm - DD/MM/YYYY")})))];return n.createElement(_,{title:"Thời gian cấp",dropdownRender:()=>n.createElement(b.A,{className:"report-table__header-filter-content",defaultSelectedKeys:["ALL"],items:e})})},dataIndex:"issueTime",key:"report_issueTime",render:e=>m()(e).format("HH:mm - DD/MM/YYYY")},{title:()=>{const e=[{key:"ALL",onClick:()=>o("ALL"),label:"Tất cả"},{key:"WAITING",onClick:()=>o("WAITING"),label:"Đang chờ"},{key:"USED",onClick:()=>o("USED"),label:"Đã sử dụng"},{key:"SKIPPED",onClick:()=>o("SKIPPED"),label:"Bỏ qua"}];return n.createElement(_,{title:"Trạng thái",dropdownRender:()=>n.createElement(b.A,{className:"report-table__header-filter-content",defaultSelectedKeys:["ALL"],items:e})})},key:"report_status",dataIndex:"status",render:e=>{switch(e){case"WAITING":return"Đang chờ";case"USED":return"Đã sử dụng";case"SKIPPED":return"Bỏ qua";default:return""}}},{dataIndex:"issueSource",key:"report_issueSource",title:()=>{const e=[{key:"ALL",onClick:()=>u("ALL"),label:"Tất cả"},{key:"KIOSK",onClick:()=>u("Kiosk"),label:"Kiosk"},{key:"SYSTEM",onClick:()=>u("Hệ thống"),label:"Hệ thống"}];return n.createElement(_,{title:"Nguồn cấp",dropdownRender:()=>n.createElement(b.A,{className:"report-table__header-filter-content",defaultSelectedKeys:["ALL"],items:e})})}}];return n.createElement("div",{className:"report-table"},n.createElement(y.A,{bordered:!0,columns:f,dataSource:a,rowKey:e=>e.id}))};var k=r(68644),S=r.n(k),A=r(2519);const j=()=>{const[e,t]=(0,n.useState)([]),[r,u]=(0,n.useState)([]),[b,y]=(0,n.useState)(m()().startOf("month")),[v,h]=(0,n.useState)(m()()),E=(0,d.G)(p.h9);return(0,n.useEffect)((()=>{E.execute({}).then(t).catch((()=>t([])))}),[]),(0,n.useEffect)((()=>{E.execute({startDate:b?.toDate(),endDate:v?.toDate()}).then(t).catch((()=>t([])))}),[b,v]),n.createElement("div",null,n.createElement(c.A,{style:{padding:"2.4rem"},align:"center",justify:"space-between"},n.createElement(o.A,{items:[{title:"Báo cáo"},{title:"Lập báo cáo"}]}),n.createElement(i.A,null)),n.createElement("div",{style:{paddingLeft:"2.4rem",paddingRight:"10.4rem"}},n.createElement(s.A,{layout:"vertical"},n.createElement(c.A,null,n.createElement(s.A.Item,{label:"Chọn thời gian"},n.createElement(f.A,{start:b,end:v,onChange:(e,t)=>{y(e),h(t)}})))),n.createElement(w,{queues:e,setFilteredQueues:u})),n.createElement(l.A,null,n.createElement(l.A.Item,{icon:n.createElement(a.rD,null),onClick:async()=>{await async function(e,t,r="export.xlsx"){if(0===e.length)throw new Error("Data array is empty");const n=t||Object.keys(e[0]),a=new(S().Workbook),i=a.addWorksheet("Sheet1");i.addRow(n),e.forEach((e=>{const t=n.map((t=>e[t]??""));i.addRow(t)}));const c=await a.xlsx.writeBuffer(),s=new Blob([c],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,A.saveAs)(s,r)}(r.map((e=>({id:e.id,serialNumber:e.serialNumber,customerName:e.customer.name,customerPhone:e.customer.phone,customerEmail:e.customer.email,service:e.service.name,issueTime:e.issueTime,expiryDate:e.expiryDate,status:e.status,issueSource:e.issueSource}))))}},"Tải về")))}}}]);