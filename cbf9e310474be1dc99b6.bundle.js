"use strict";(self.webpackChunkmy_webpack_project=self.webpackChunkmy_webpack_project||[]).push([[805],{74936:(e,t,r)=>{r.d(t,{Z1:()=>o,bU:()=>p,h1:()=>u,ko:()=>s});var n=r(91055),a=r(21851);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const m=(0,n.rJ)(a.db,"services"),o=async e=>{const t=[];e&&t.push((0,n._M)("status","==",e));const r=(0,n.P)(m,...t,(0,n.My)("code","asc"));return(await(0,n.GG)(r)).docs.map((e=>{const t=e.data();return c({id:e.id},t)}))},s=async e=>{const t=(0,n.P)(m,(0,n._M)("code","==",e),(0,n.AB)(1)),r=await(0,n.GG)(t);if(r.empty)return null;{const e=r.docs[0],t=e.data();return c({id:e.id},t)}},u=async e=>{console.log(e);try{return(await(0,n.gS)(m,e)).id}catch(e){throw console.error("Error adding service: ",e),new Error("Unable to add a service")}},p=async(e,t)=>{try{const r=(0,n.H9)(m,e);await(0,n.mZ)(r,t),console.log("Service updated successfully")}catch(e){throw console.error("Error updating service: ",e),new Error("Unable to update the service")}}},20831:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(77810),a=r(26038),l=r(68190);const c=({style:e})=>n.createElement(l.A,{align:"center",gap:"small",className:"form-note",style:e},n.createElement(a.Q3,null),n.createElement("span",null,"Là trường thông tin bắt buộc"))},82952:(e,t,r)=>{r.d(t,{A:()=>m});var n=r(77810),a=r(68190),l=r(37088),c=r(77076),i=r(81342);const m=()=>n.createElement(a.A,{align:"center",justify:"center",style:{minHeight:"100vh"}},n.createElement(l.Ay,{status:404,title:"404",subTitle:"Đường dẫn không tồn tại",extra:n.createElement(i.N_,{to:"/dashboard"},n.createElement(c.Ay,{type:"primary"},"Back dashboard"))}))},61209:(e,t,r)=>{r.r(t),r.d(t,{default:()=>x});var n=r(77810),a=r(87026),l=r(98617),c=r(68190),i=r(23079),m=r(6194),o=r(64362),s=r(4504),u=r(14856),p=r(74789),d=r(77076),f=r(17192),y=r(79543),h=r(28689),g=r(81342),E=r(90194),b=r(20831),v=r(29200),A=r(74936),w=r(82952);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const x=()=>{const[e]=a.A.useForm(),{code:t}=(0,h.g)(),r=(0,h.Zp)(),[j,P]=(0,n.useState)(null),x=(0,v.G)(A.ko),N=(0,v.G)(A.bU);return(0,n.useEffect)((()=>{t&&x.execute(t).then(P).catch((()=>P(null)))}),[t]),"loading"===x.status?n.createElement(c.A,{align:"center",justify:"center",className:"h-100vh"},n.createElement(i.A,{size:"large"})):j?n.createElement("div",null,n.createElement(c.A,{style:{padding:"2.4rem"},align:"center",justify:"space-between"},n.createElement(E.A,{items:[{title:"Dịch vụ"},{title:"Danh sách dịch vụ",href:"/admin/dich-vu"},{title:"Cập nhật dịch vụ"}]}),n.createElement(f.A,null)),n.createElement(a.A,{form:e,onFinish:async e=>{console.log(e);try{await N.execute(j?.id,O(O({},e),{},{description:e.description||"",useFromToNumber:!!e.useFromToNumber,usePrefix:!!e.usePrefix,useSuffix:!!e.useSuffix,isDaily:!!e.isDaily,fromNumber:e.fromNumber,toNumber:e.toNumber,prefix:e.prefix,suffix:e.suffix})),l.Ay.success("Cập nhật dịch vụ thành công",5),r("/admin/dich-vu")}catch(e){l.Ay.error("Đã có lỗi xảy ra. Hãy thử lại sau!",5),console.error(e)}},initialValues:j,layout:"vertical"},n.createElement("div",{style:{paddingLeft:"2.4rem",paddingRight:"6.4rem"}},n.createElement(m.A.Title,{level:3,style:{color:"#FF7506",marginBottom:"1.6rem"}},"Quản lý dịch vụ"),n.createElement(y.A,null,n.createElement(m.A.Title,{level:4,style:{color:"#FF7506",marginBottom:"1.6rem"}},"Thông tin dịch vụ"),n.createElement(o.A,{gutter:[24,0]},n.createElement(s.A,{span:12},n.createElement(c.A,{vertical:!0,justify:"space-between",className:"h-100"},n.createElement(a.A.Item,{label:"Mã dịch vụ:",required:!0,name:"code",rules:[{required:!0,message:"Vui lòng nhập mã dịch vụ"},{pattern:/^[a-zA-Z0-9_-]+$/,message:"Mã dịch vụ chỉ bao gồm chữ cái, số, dấu gạch dưới và dấu gạch nối"}]},n.createElement(u.A,{placeholder:"Nhập mã dịch vụ",size:"large",autoFocus:!0})),n.createElement(a.A.Item,{label:"Tên dịch vụ:",required:!0,name:"name",rules:[{required:!0,message:"Vui lòng nhập tên dịch vụ"},()=>({validator:(e,t)=>!t||t.trim().length>3?Promise.resolve():Promise.reject(new Error("Tên dịch vụ không hợp lệ. Tối thiểu 3 ký tự"))})]},n.createElement(u.A,{placeholder:"Nhập tên dịch vụ",size:"large"})))),n.createElement(s.A,{span:12},n.createElement(a.A.Item,{label:"Mô tả",name:"description"},n.createElement(u.A.TextArea,{placeholder:"Mô tả dịch vụ",size:"large",rows:5,style:{resize:"none"}})))),n.createElement(m.A.Title,{level:4,style:{color:"#FF7506",marginBottom:"1.2rem"}},"Quy tắc cấp số"),n.createElement(c.A,{vertical:!0,gap:"1.2rem",style:{marginBottom:"2.4rem"}},n.createElement(o.A,null,n.createElement(s.A,{flex:"20rem"},n.createElement(c.A,{align:"center",className:"h-100"},n.createElement(a.A.Item,{name:"useFromToNumber",valuePropName:"checked"},n.createElement(p.A,null,"Tăng tự động từ:")))),n.createElement(s.A,{flex:"auto"},n.createElement(c.A,{align:"center",gap:"middle"},n.createElement(a.A.Item,{name:"fromNumber"},n.createElement(u.A,{size:"large",style:{width:"6.5rem"}})),n.createElement("span",null,"đến"),n.createElement(a.A.Item,{name:"toNumber"},n.createElement(u.A,{size:"large",style:{width:"6.5rem"}}))))),n.createElement(o.A,null,n.createElement(s.A,{flex:"20rem"},n.createElement(c.A,{align:"center",className:"h-100"},n.createElement(a.A.Item,{name:"usePrefix",valuePropName:"checked"},n.createElement(p.A,null,"Prefix:")))),n.createElement(s.A,{flex:"auto"},n.createElement(a.A.Item,{name:"prefix"},n.createElement(u.A,{size:"large",style:{width:"6.5rem"}})))),n.createElement(o.A,null,n.createElement(s.A,{flex:"20rem"},n.createElement(c.A,{align:"center",className:"h-100"},n.createElement(a.A.Item,{name:"useSuffix",valuePropName:"checked"},n.createElement(p.A,null,"Suffix:")))),n.createElement(s.A,{flex:"auto"},n.createElement(a.A.Item,{name:"suffix"},n.createElement(u.A,{size:"large",style:{width:"6.5rem"}})))),n.createElement(o.A,null,n.createElement(s.A,{flex:"20rem"},n.createElement(a.A.Item,{name:"isDaily",valuePropName:"checked"},n.createElement(p.A,null,"Reset mỗi ngày"))))),n.createElement(b.A,null)),n.createElement(c.A,{justify:"center",gap:"large"},n.createElement(g.N_,{to:"/admin/dich-vu"},n.createElement(d.Ay,{style:{backgroundColor:"#FFF2E7"},htmlType:"button",type:"primary",size:"large",ghost:!0},"Hủy bỏ")),n.createElement(d.Ay,{htmlType:"submit",type:"primary",size:"large"},"Cập nhật"))))):n.createElement(w.A,null)}}}]);