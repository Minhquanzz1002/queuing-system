"use strict";(self.webpackChunkmy_webpack_project=self.webpackChunkmy_webpack_project||[]).push([[688],{24185:(e,t,r)=>{r.d(t,{Jv:()=>y,h9:()=>b,sc:()=>v});var a=r(91055),n=r(21851),i=r(7059),c=r.n(i);const l=["issueTime","expiryDate"],s=["issueTime","expiryDate"];function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.includes(a))continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const d=(0,a.rJ)(n.db,"queues"),f=(0,a.rJ)(n.db,"services"),b=async({status:e,issueSource:t,serviceId:r,startDate:n,endDate:i})=>{const c=[...e?[(0,a._M)("status","==",e)]:[],...t?[(0,a._M)("issueSource","==",t)]:[],...r?[(0,a._M)("service","==",(0,a.H9)(f,r))]:[],...n?[(0,a._M)("issueTime",">=",n)]:[],...i?[(0,a._M)("issueTime","<=",i)]:[]],s=(0,a.P)(d,...c),o=await(0,a.GG)(s);return await Promise.all(o.docs.map((async e=>{const t=e.data(),{issueTime:r,expiryDate:n}=t,i=p(t,l),c=await(0,a.x7)(i.service),s=c.data(),o=u({id:c.id},s);return u(u({id:e.id},i),{},{issueTime:r.toDate(),expiryDate:n.toDate(),service:o})})))},v=async e=>{const t=await(0,a.x7)((0,a.H9)(d,e));if(!t.exists())return null;const r=t.data(),{issueTime:n,expiryDate:i}=r,c=p(r,s),l=await(0,a.x7)(c.service),o=l.data(),m=u({id:l.id},o);return u(u({id:t.id},c),{},{issueTime:n.toDate(),expiryDate:i.toDate(),service:m})},y=async e=>{try{const t=c()(),r=t.endOf("day"),i={serialNumber:await(async e=>{let t="";return e.usePrefix&&e.prefix&&(t+=e.prefix),t+="0001",e.useSuffix&&e.suffix&&(t+=e.suffix),t})(e.service),customer:e.customer,status:"WAITING",issueTime:t.toDate(),issueSource:e.issueSource,expiryDate:r.toDate(),service:(0,a.H9)(n.db,"services",e.service.id)},l=await(0,a.gS)(d,i),s=(await(0,a.x7)(l)).data();if(!s)throw new Error("Unable to add a queue");return{id:l.id,serialNumber:s.serialNumber,customer:s.customer,status:s.status,issueTime:s.issueTime.toDate(),expiryDate:s.expiryDate.toDate(),service:e.service,issueSource:s.issueSource}}catch(e){throw console.error("Error adding device: ",e),new Error("Unable to add a device")}}},90194:(e,t,r)=>{r.d(t,{A:()=>s});var a=r(77810),n=r(6620),i=r(26038),c=r(81342);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},l.apply(null,arguments)}const s=e=>a.createElement(n.A,l({className:"breadcrumb",separator:a.createElement(i.Vj,{style:{color:"rgba(126, 125, 136, 1)"}}),itemRender:(e,t,r)=>r.indexOf(e)!==r.length-1&&e.href?a.createElement(c.N_,{className:"breadcrumb-link",to:e.href},e.title):a.createElement("span",{className:"breadcrumb-link"},e.title)},e))},79543:(e,t,r)=>{r.d(t,{A:()=>c});var a=r(77810);const n=["children","className"];function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},i.apply(null,arguments)}const c=e=>{let{children:t,className:r}=e,c=function(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.includes(a))continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,n);return a.createElement("div",i({className:`card ${r||""}`},c),t)}},17192:(e,t,r)=>{r.d(t,{A:()=>y});var a=r(77810),n=r(68190),i=r(77076),c=r(75832),l=r(26038),s=r(81342),o=r(71468),u=r(8955),m=r(7059),p=r.n(m),d=r(29200),f=r(24185);const b=({name:e,date:t})=>a.createElement("div",{className:"notification-card"},a.createElement("div",{className:"notification-card__user"},"Người dùng: ",e),a.createElement("div",{className:"notification-card__time",title:`Thời gian nhận số: ${p()(t).format("HH[h]mm [ngày] DD/MM/YYYY")}`},"Thời gian nhận số: ",p()(t).format("HH[h]mm [ngày] DD/MM/YYYY"))),v=({open:e,setOpen:t})=>{const r=(0,a.useRef)(null);(0,u.A)(r,(()=>t(!1)));const[n,i]=(0,a.useState)([]),c=(0,d.G)(f.h9);return(0,a.useEffect)((()=>{c.execute({}).then(i).catch((()=>i([])))}),[]),e?a.createElement("div",{className:"topbar__notification-popup",ref:r},a.createElement("div",{className:"topbar__notification-popup__title"},"Thông báo"),a.createElement("div",{className:"topbar__notification-popup__content"},n.map(((e,t)=>a.createElement(a.Fragment,{key:t},t>0&&a.createElement("div",{className:"notification-card__divider"}),a.createElement(s.N_,{to:`/admin/cap-so/${e.id}`},a.createElement(b,{name:e.customer.name,date:e.expiryDate}))))))):null},y=()=>{const{user:e}=(0,o.d4)((e=>e.profile)),[t,r]=(0,a.useState)(!1);return a.createElement(n.A,{className:"topbar",align:"center",gap:"large"},a.createElement("div",{style:{position:"relative"}},a.createElement(i.Ay,{shape:"circle",className:"topbar__notification",onClick:e=>{e.stopPropagation(),r(!0)}},a.createElement(l.pY,null)),a.createElement(v,{open:t,setOpen:r})),a.createElement(n.A,{gap:"small",className:"topbar__user"},a.createElement(s.N_,{to:"/admin/ho-so"},a.createElement(c.A,{size:40,className:"topbar__avatar"},"A")),a.createElement(n.A,{vertical:!0,className:"topbar__info"},a.createElement("div",{className:"topbar__greeting"},"Xin chào"),a.createElement(s.N_,{to:"/admin/ho-so"},a.createElement("div",{className:"topbar__username"},e?.name||"Chưa rõ")))))}},29200:(e,t,r)=>{r.d(t,{G:()=>l});var a=r(77810);function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const l=e=>{const[t,r]=(0,a.useState)({value:void 0,status:"ready",error:null}),n=(0,a.useCallback)((e=>(r((t=>i(i({},t),{},{status:"ready",value:e}))),Promise.resolve(e))),[]),c=(0,a.useCallback)((e=>(r((t=>i(i({},t),{},{status:"error",error:e}))),console.log(e),Promise.reject(e))),[]),l=(0,a.useCallback)(((...t)=>(r((e=>i(i({},e),{},{status:"loading",value:void 0,error:null}))),e(...t).then(n).catch(c))),[e,c,n]);return i({execute:l},t)}},8955:(e,t,r)=>{r.d(t,{A:()=>n});var a=r(77810);const n=(e,t)=>{const r=(0,a.useCallback)((r=>{r&&e.current&&!e.current.contains(r.target)&&t(r)}),[e,t]);(0,a.useEffect)((()=>(document.addEventListener("mousedown",(e=>r(e)),!0),document.addEventListener("touchstart",(e=>r(e)),!0),()=>{document.removeEventListener("mousedown",r,!0),document.removeEventListener("touchstart",r,!0)})),[r])}},30688:(e,t,r)=>{r.r(t),r.d(t,{default:()=>h});var a=r(77810),n=r(68190),i=r(87026),c=r(64362),l=r(4504),s=r(14856),o=r(90194),u=r(17192),m=r(79543),p=r(91140),d=r(64180);const f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 248H728l-32.4-90.8a32.07 32.07 0 00-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z"}}]},name:"camera",theme:"outlined"};var b=r(30734),v=function(e,t){return a.createElement(b.A,(0,d.A)({},e,{ref:t,icon:f}))};const y=a.forwardRef(v),g=e=>{const{disabled:t}=e,[r,n]=(0,a.useState)(null);return a.createElement("div",{className:"avatar-box"},a.createElement("div",{className:"avatar-box__wrapper"},a.createElement("img",{src:r?URL.createObjectURL(r):p.v7,alt:"Avatar"}),a.createElement("div",{className:"avatar-box__btn-upload"},a.createElement("label",{htmlFor:"input-avatar"},a.createElement(y,null)),a.createElement("input",{hidden:!0,disabled:t,type:"file",onChange:e=>{const t=e.target.files?.[0];t&&n(t)},id:"input-avatar",accept:"image/png, image/jpeg, image/jpg"}))))};var E=r(71468);const h=()=>{const{user:e}=(0,E.d4)((e=>e.profile));return a.createElement("div",{className:"profile"},a.createElement(n.A,{style:{padding:"2.4rem"},align:"center",justify:"space-between"},a.createElement(o.A,{items:[{title:"Thông tin cá nhân"}]}),a.createElement(u.A,null)),a.createElement(m.A,{className:"profile__content"},a.createElement(n.A,{gap:"2.4rem"},a.createElement("div",{className:"profile__left"},a.createElement(g,null),a.createElement("div",{className:"profile__left--name"},e?.name)),a.createElement(i.A,{layout:"vertical",style:{flexGrow:1}},a.createElement(c.A,{gutter:24},a.createElement(l.A,{span:12},a.createElement(i.A.Item,{label:"Tên người dùng"},a.createElement(s.A,{placeholder:"Tên người dùng",value:e?.name,size:"large",disabled:!0})),a.createElement(i.A.Item,{label:"Số điện thoại"},a.createElement(s.A,{type:"tel",placeholder:"Số điện thoại",value:e?.phone,size:"large",disabled:!0})),a.createElement(i.A.Item,{label:"Email"},a.createElement(s.A,{type:"email",placeholder:"Email",value:e?.username,size:"large",disabled:!0}))),a.createElement(l.A,{span:12},a.createElement(i.A.Item,{label:"Tên đăng nhập"},a.createElement(s.A,{placeholder:"Tên đăng nhập",value:e?.username,size:"large",disabled:!0})),a.createElement(i.A.Item,{label:"Mật khẩu"},a.createElement(s.A.Password,{type:"tel",placeholder:"Mật khẩu",value:e?.password,size:"large",disabled:!0})),a.createElement(i.A.Item,{label:"Vai trò"},a.createElement(s.A,{type:"email",placeholder:"Vai trò",value:e?.role.name,size:"large",disabled:!0}))))))))}},4504:(e,t,r)=>{r.d(t,{A:()=>a});const a=r(62924).A},64362:(e,t,r)=>{r.d(t,{A:()=>a});const a=r(18118).A}}]);