"use strict";(self.webpackChunkmy_webpack_project=self.webpackChunkmy_webpack_project||[]).push([[824],{74936:(e,t,r)=>{r.d(t,{Z1:()=>u,bU:()=>p,h1:()=>d,ko:()=>m});var n=r(91055),a=r(21851),c=r(65304);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const s=(0,n.rJ)(a.db,"services"),u=async e=>{const t=[];e&&t.push((0,n._M)("status","==",e));const r=(0,n.P)(s,...t,(0,n.My)("code","asc"));return(await(0,n.GG)(r)).docs.map((e=>{const t=e.data();return i({id:e.id},t)}))},m=async e=>{const t=(0,n.P)(s,(0,n._M)("code","==",e),(0,n.AB)(1)),r=await(0,n.GG)(t);if(r.empty)return null;{const e=r.docs[0],t=e.data();return i({id:e.id},t)}},d=async e=>{console.log(e);try{const t=await(0,n.gS)(s,e);return await(0,c.T)({action:`Thêm dịch vụ ${t.id}`,ipAddress:"192.168.1.1"}),t.id}catch(e){throw console.error("Error adding service: ",e),new Error("Unable to add a service")}},p=async(e,t)=>{try{const r=(0,n.H9)(s,e);await(0,n.mZ)(r,t),await(0,c.T)({action:`Cập nhật dịch vụ ${e}`,ipAddress:"192.168.1.1"}),console.log("Service updated successfully")}catch(e){throw console.error("Error updating service: ",e),new Error("Unable to update the service")}}},8590:(e,t,r)=>{r.d(t,{A:()=>y});var n=r(77810),a=r(68190),c=r(14856),l=r(26038),i=r(8955),o=r(7059),s=r.n(o);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const p=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"6",height:"8",viewBox:"0 0 6 8",fill:"none"},n.createElement("path",{d:"M5.51129 3.13807L3.96467 2.01241L1.44455 0.178209C0.910697 -0.20463 0 0.0696425 0 0.618188V4.17802V7.38359C0 7.93213 0.910697 8.20641 1.44455 7.81785L5.51129 4.85799C6.1629 4.38944 6.1629 3.61233 5.51129 3.13807Z",fill:"#535261"})),y=({start:e,end:t,onChange:r})=>{const[o,u]=(0,n.useState)(!1),[d,y]=(0,n.useState)(s()()),f=(0,n.useRef)(null);(0,i.A)(f,(()=>u(!1)));const b=()=>{u(!o)};return n.createElement(a.A,{gap:"small",align:"center",className:"range-picker"},n.createElement(c.A,{size:"large",prefix:n.createElement(l.Vq,{style:{color:"#FF7506"}}),placeholder:"DD/MM/YYYY",value:e?e.format("DD/MM/YYYY"):"",readOnly:!0,onClick:b}),n.createElement(p,null),n.createElement(c.A,{size:"large",prefix:n.createElement(l.Vq,{style:{color:"#FF7506"}}),placeholder:"DD/MM/YYYY",value:t?t.format("DD/MM/YYYY"):"",readOnly:!0,onClick:b}),o&&n.createElement("div",{className:"range-picker__calendar",ref:f},n.createElement(a.A,{justify:"space-between",align:"center",className:"range-picker__calendar-header"},n.createElement("button",{onClick:()=>{y(d.subtract(1,"month"))}},n.createElement(l.Vj,null)),n.createElement("div",null,d.format("MMMM YYYY")),n.createElement("button",{onClick:()=>{y(d.add(1,"month"))}},n.createElement(l.Vj,null))),n.createElement("div",{className:"range-picker__calendar-divider"}),n.createElement("div",{className:"range-picker__calendar-weekdays"},["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((e=>n.createElement(a.A,{justify:"center",align:"center",key:e,className:"calendar__day-name"},e)))),n.createElement("div",{className:"range-picker__calendar-body"},(()=>{const r=d.startOf("month"),n=d.endOf("month"),a=[],c=r.day(),l=0===c?6:c-1,i=r.subtract(1,"month");for(let e=l-1;e>=0;e--)a.push({date:i.endOf("month").subtract(e,"day"),currentMonth:!1});for(let e=1;e<=n.date();e++){const t=r.date(e);a.push({date:t,currentMonth:!0})}const o=42-a.length,s=n.add(1,"day");for(let e=1;e<=o;e++)a.push({date:s.date(e),currentMonth:!1});return a.map((r=>m(m({},r),{},{isStart:e&&r.date.isSame(e,"day"),isEnd:t&&r.date.isSame(t,"day"),isInRange:e&&t&&r.date.isBetween(e,t,"day","[]")})))})().map((({date:c,currentMonth:l,isStart:i,isEnd:o,isInRange:s},u)=>n.createElement(a.A,{align:"center",justify:"center",key:u,onClick:()=>(n=>{!e||e&&t?r(n,null):n.isBefore(e)?r(n,e):r(e,n)})(c),className:`range-picker__calendar-day ${l?"range-picker__calendar-day--current":"range-picker__calendar-day--other-month"} ${i?"range-picker__calendar-day--start":""} ${o?"range-picker__calendar-day--end":""} ${s?"range-picker__calendar-day--in-range":""}`},c.format("DD")))))))}},71785:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(77810),a=r(62265),c=r(45958),l=r(84740);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(null,arguments)}const o=e=>{const[t,r]=(0,n.useState)(!1),o=(0,n.useMemo)((()=>t?n.createElement(a.A,{style:{color:"#FF7506"}}):n.createElement(c.A,{style:{color:"#FF7506"}})),[t]);return n.createElement(l.A,i({size:"large",suffixIcon:o},e,{onDropdownVisibleChange:e=>r(e)}))};o.Option=l.A.Option;const s=o},88207:(e,t,r)=>{r.r(t),r.d(t,{default:()=>j});var n=r(77810),a=r(26038),c=r(17192),l=r(68190),i=r(6194),o=r(87026),s=r(22295),u=r(81342),m=r(57975),d=r(71785),p=r(60763),y=r(90194),f=r(75265),b=r(29200),h=r(74936),E=r(24185),g=r(7059),v=r.n(g),O=r(8590);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const _=[{title:"STT",dataIndex:"serialNumber",key:"queue_serialNumber"},{title:"Tên khách hàng",dataIndex:"customer",key:"queue_customerName",render:(e,t)=>t.customer.name},{title:"Tên dịch vụ",dataIndex:"service",key:"queue_service",render:e=>e.name},{title:"Thời gian cấp",dataIndex:"issueTime",key:"queue_issueTime",render:e=>v()(e).format("HH:mm - DD/MM/YYYY")},{title:"Hạn sử dụng",dataIndex:"expiryDate",key:"queue_expiryDate",render:e=>v()(e).format("HH:mm - DD/MM/YYYY")},{title:"Trạng thái",key:"queue_status",dataIndex:"status",render:e=>n.createElement(n.Fragment,null,"USED"===e?n.createElement(l.A,{gap:"small"},n.createElement(a.AB,{style:{color:"#7E7D88"}}),"Đã sử dụng"):"WAITING"===e?n.createElement(l.A,{gap:"small"},n.createElement(a.AB,{style:{color:"#4277FF"}}),"Đang chờ"):n.createElement(l.A,{gap:"small"},n.createElement(a.AB,{style:{color:"#E73F3F"}}),"Bỏ qua"))},{title:"Nguồn cấp",dataIndex:"issueSource",key:"queue_issueSource"},{title:"",key:"detail",render:(e,t)=>n.createElement(u.N_,{to:`/admin/cap-so/${t.id}`},n.createElement(f.A,null,"Chi tiết"))}],j=()=>{const[e,t]=(0,n.useState)({status:"ALL",issueSource:"ALL",service:"ALL",startDate:v()().startOf("month"),endDate:v()()}),[r,u]=(0,n.useState)([]),[f,g]=(0,n.useState)([]),A=(0,b.G)(h.Z1),S=(0,b.G)(E.h9);return(0,n.useEffect)((()=>{S.execute({}).then(g).catch((()=>g([]))),A.execute("ACTIVE").then(u).catch((()=>u([])))}),[]),(0,n.useEffect)((()=>{const{status:t,issueSource:r,service:n,startDate:a,endDate:c}=e,l="ALL"===t?void 0:t,i="ALL"===r?void 0:r,o="ALL"===n?void 0:n;S.execute({status:l,issueSource:i,serviceId:o,startDate:a?.toDate(),endDate:c?.toDate()}).then(g).catch((()=>g([])))}),[e]),n.createElement("div",null,n.createElement(l.A,{style:{padding:"2.4rem"},align:"center",justify:"space-between"},n.createElement(y.A,{items:[{title:"Cấp số"},{title:"Danh sách cấp số"}]}),n.createElement(c.A,null)),n.createElement("div",{style:{paddingLeft:"2.4rem",paddingRight:"10.4rem"}},n.createElement(i.A.Title,{level:3,style:{color:"#FF7506",marginBottom:"1.6rem"}},"Quản lý cấp số"),n.createElement(o.A,{layout:"vertical",initialValues:e,onValuesChange:(e,r)=>t((e=>w(w({},e),r)))},n.createElement(l.A,{justify:"space-between",wrap:!0},n.createElement(o.A.Item,{label:"Tên dịch vụ",name:"service"},n.createElement(d.A,{style:{width:"15.5rem"}},n.createElement(d.A.Option,{value:"ALL"},"Tất cả"),r.map((e=>n.createElement(d.A.Option,{key:e.id,value:e.id},e.name))))),n.createElement(o.A.Item,{label:"Tình trạng",name:"status"},n.createElement(d.A,{style:{width:"15.5rem"},options:[{key:"STATUS_FILTER_ALL",value:"ALL",label:"Tất cả"},{key:"STATUS_FILTER_PENDING",value:"WAITING",label:"Đang chờ"},{key:"STATUS_FILTER_USED",value:"USED",label:"Đã sử dụng"},{key:"STATUS_FILTER_SKIPPED",value:"SKIPPED",label:"Bỏ qua"}]})),n.createElement(o.A.Item,{label:"Nguồn cấp",name:"issueSource"},n.createElement(d.A,{style:{width:"15.5rem"},options:[{key:"ISSUE_SOURCE_FILTER_ALL",value:"ALL",label:"Tất cả"},{key:"ISSUE_SOURCE_FILTER_KIOSK",value:"Kiosk",label:"Kiosk"},{key:"ISSUE_SOURCE_FILTER_SYSTEM",value:"Hệ thống",label:"Hệ thống"}]})),n.createElement(o.A.Item,{label:"Chọn thời gian"},n.createElement(O.A,{start:e.startDate,end:e.endDate,onChange:(e,r)=>{t((t=>w(w({},t),{},{startDate:e,endDate:r})))}})),n.createElement(o.A.Item,{label:"Từ khóa",name:"search"},n.createElement(p.A,{style:{width:"30rem"},id:"search",placeholder:"Nhập từ khóa"})))),n.createElement(s.A,{bordered:!0,columns:_,dataSource:f,rowKey:e=>e.id})),n.createElement(m.A,null,n.createElement(m.A.Item,{icon:n.createElement(a.Jr,null),href:"/admin/cap-so/cap-so-moi"},"Cấp",n.createElement("br",null)," số mới")))}}}]);